<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <style>
    body {
      background: linear-gradient(135deg, #5a2a83, #9c27b0);
      font-family: 'Cairo', sans-serif;
      padding: 20px 10px;
      text-align: center;
      margin: 0;
    }
    .box {
      max-width: 400px;
      width: 100%;
      margin: auto;
      background: #ffffff;
      padding: 30px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      box-sizing: border-box;
    }
    h2 {
      color: #3f51b5;
      margin-bottom: 20px;
      font-weight: 700;
      letter-spacing: 1px;
      font-size: 1.8rem;
    }
    input, select, button {
      width: 100%;
      box-sizing: border-box;
      font-family: 'Cairo', sans-serif;
      font-size: 16px;
    }
    input, select {
      padding: 12px;
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus {
      border-color: #3f51b5;
      outline: none;
    }
    button {
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 700;
      box-shadow: 0 0 12px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      margin-top: 10px;
    }
    #submitBtn {
      background-color: #9c27b0;
      color: white;
      box-shadow: 0 0 12px #9c27b0;
    }
    #submitBtn:hover {
      filter: brightness(85%);
    }
    #bankTransferBtn {
      background-color: #9e9e9e;
      color: white;
      box-shadow: 0 0 12px #9e9e9e;
    }
    #bankTransferBtn.active-basic {
      background-color: #9e9e9e;
    }
    #bankTransferBtn.active-premium {
      background-color: #3f51b5;
    }
    #bankTransferBtn.active-gold {
      background-color: #d4af37;
      color: black;
    }
    #bankTransferInfo {
      display: none;
      text-align: right;
      margin-top: 15px;
      background: #f0f0f0;
      padding: 15px;
      border-radius: 8px;
      color: #333;
    }
    #customDurationContainer {
      display: none;
      margin-top: 10px;
    }
    #customDurationInput {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-family: 'Cairo', sans-serif;
      font-size: 16px;
      box-sizing: border-box;
    }
    .price-display {
      margin: 8px 0;
      font-size: 16px;
      color: #333;
      font-weight: bold;
    }
    #calculationDetails {
      display: none;
      margin-top: 8px;
      padding: 10px;
      background: #e8e8e8;
      border-radius: 8px;
      text-align: right;
      font-size: 14px;
      color: #222;
      white-space: pre-line;
      font-family: monospace, 'Cairo', sans-serif;
    }
    #toggleCalcBtn {
      margin-top: 4px;
      background-color: #555;
      color: white;
      font-size: 14px;
      padding: 6px 12px;
      border-radius: 6px;
      box-shadow: none;
    }
    #toggleCalcBtn:hover {
      background-color: #444;
    }
    #backBtn {
      display: inline-block;
      margin-bottom: 20px;
      color: #3f51b5;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      background: #e3e3e3;
      padding: 10px 20px;
      border-radius: 8px;
      transition: background-color 0.3s ease;
    }
    #backBtn:hover {
      background-color: #d0d0d0;
    }
    .upload-label {
      display: inline-block;
      margin-top: 10px;
      padding: 12px;
      width: 100%;
      text-align: center;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 10px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
  </style>
</head>
<body>
  <div class="box">
    <a href="subscriptions.html" id="backBtn">â¬… Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</a>
    <h2>Ø·Ù„Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</h2>
    <form id="subscriptionForm" method="get" action="subscribe-success.html" onsubmit="return validateBankInfo()">
      <input type="text" name="fullname" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required />
      <input type="email" name="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required />
      <label style="display: flex; align-items: center; gap: 8px; direction: ltr;">
        <span style="font-weight: bold;">+966</span>
        <input type="tel" name="phone" placeholder="50xxxxxxx" pattern="50[0-9]{7}" title="ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ø¨Ù€ 50 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 9 Ø£Ø±Ù‚Ø§Ù… ÙƒØ§Ù…Ù„Ø©" required style="flex: 1; text-align: left;" />
      </label>

      <select name="plan" id="planSelect" required>
        <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</option>
        <option value="basic">Ø§Ù„Ø¹Ø§Ø¯ÙŠ</option>
        <option value="premium">Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…</option>
        <option value="gold">Ø§Ù„Ø°Ù‡Ø¨ÙŠ</option>
      </select>

      <div class="price-display" id="planPrice"></div>

      <select name="duration" id="durationSelect" required>
        <option value="">Ø§Ø®ØªØ± Ù…Ø¯Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</option>
        <optgroup label="Ø£Ø³Ø¨ÙˆØ¹ÙŠ">
          <option value="1_week">Ø£Ø³Ø¨ÙˆØ¹ ÙˆØ§Ø­Ø¯</option>
          <option value="2_weeks">Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ†</option>
          <option value="3_weeks">Ø«Ù„Ø§Ø«Ø© Ø£Ø³Ø§Ø¨ÙŠØ¹</option>
        </optgroup>
        <optgroup label="Ø´Ù‡Ø±ÙŠ">
          <option value="1_month">Ø´Ù‡Ø± ÙˆØ§Ø­Ø¯</option>
          <option value="3_months">Ø«Ù„Ø§Ø«Ø© Ø£Ø´Ù‡Ø±</option>
          <option value="6_months">Ø³ØªØ© Ø£Ø´Ù‡Ø±</option>
        </optgroup>
        <optgroup label="Ø³Ù†ÙˆÙŠ">
          <option value="1_year">Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©</option>
          <option value="2_years">Ø³Ù†ØªÙŠÙ†</option>
          <option value="3_years">Ø«Ù„Ø§Ø« Ø³Ù†ÙˆØ§Øª</option>
        </optgroup>
        <option value="custom">Ù…Ø®ØµØµØ©</option>
      </select>

      <div id="customDurationContainer">
        <input type="text" id="customDurationInput" name="customDuration" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡Ø§ Ù‡Ù†Ø§" />
      </div>

      <div class="price-display" id="durationPrice"></div>

      <button type="button" id="bankTransferBtn">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ</button>

      <div id="bankTransferInfo">
        <p><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> Ø´Ø±ÙƒØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</p>
        <p><strong>Ø§Ù„Ø¨Ù†Ùƒ:</strong> Ø¨Ù†Ùƒ Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ</p>
        <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø¢ÙŠØ¨Ø§Ù†:</strong> SA0000000000000000000000</p>
        <label for="transferReceipt">Ø¥Ø±ÙØ§Ù‚ Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„:</label>
        <input type="file" id="transferReceipt" name="transferReceipt" accept="image/*,application/pdf" style="display: none;" />
        <label for="transferReceipt" id="uploadLabel" class="upload-label">ğŸ“ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø¥Ø±ÙØ§Ù‚ Ø§Ù„Ø¥ÙŠØµØ§Ù„</label>
      </div>

      <button id="submitBtn" type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>

      <button type="button" id="toggleCalcBtn">Ø§Ù„Ø­Ø³Ø¨Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©</button>
      <div id="calculationDetails"></div>
    </form>
  </div>

  <script>
    const planPrices = {
      basic: 99,
      premium: 199,
      gold: 349
    };

    const durationToWeeks = {
      '1_week': 1,
      '2_weeks': 2,
      '3_weeks': 3,
      '1_month': 4.345,
      '3_months': 13.035,
      '6_months': 26.07,
      '1_year': 52.1775,
      '2_years': 104.355,
      '3_years': 156.5325
    };

    const planSelect = document.getElementById('planSelect');
    const durationSelect = document.getElementById('durationSelect');
    const planPriceDisplay = document.getElementById('planPrice');
    const durationPriceDisplay = document.getElementById('durationPrice');
    const bankTransferBtn = document.getElementById('bankTransferBtn');
    const bankTransferInfo = document.getElementById('bankTransferInfo');
    const submitBtn = document.getElementById('submitBtn');
    const customDurationContainer = document.getElementById('customDurationContainer');
    const customDurationInput = document.getElementById('customDurationInput');
    const toggleCalcBtn = document.getElementById('toggleCalcBtn');
    const calculationDetails = document.getElementById('calculationDetails');
    const uploadLabel = document.getElementById('uploadLabel');

    let bankTransferSelected = false;

    function updateButtonColors(plan) {
      let color = '#9c27b0';
      if (plan === 'basic') color = '#9e9e9e';
      else if (plan === 'premium') color = '#3f51b5';
      else if (plan === 'gold') color = '#d4af37';

      submitBtn.style.backgroundColor = color;
      submitBtn.style.boxShadow = `0 0 12px ${color}`;
      bankTransferBtn.style.backgroundColor = color;
      bankTransferBtn.style.boxShadow = `0 0 12px ${color}`;
      bankTransferBtn.style.color = (plan === 'gold') ? 'black' : 'white';
      uploadLabel.style.backgroundColor = color;
      uploadLabel.style.color = (plan === 'gold') ? 'black' : 'white';
      uploadLabel.style.boxShadow = `0 0 12px ${color}`;
    }

    function updatePlanPrice() {
      const plan = planSelect.value;
      if (plan && planPrices[plan]) {
        planPriceDisplay.textContent = `Ø³Ø¹Ø± Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©: ${planPrices[plan]} Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ`;
        updateButtonColors(plan);
      } else {
        planPriceDisplay.textContent = '';
        updateButtonColors(null);
      }
      updateTotalPrice();
    }

    function updateDurationPrice() {
      const duration = durationSelect.value;
      if (!duration) {
        durationPriceDisplay.textContent = '';
        customDurationContainer.style.display = 'none';
        customDurationInput.required = false;
        calculationDetails.style.display = 'none';
        return;
      }
      if (duration === 'custom') {
        durationPriceDisplay.textContent = 'Ø§Ù„Ù…Ø¯Ø© Ù…Ø®ØµØµØ©ØŒ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡Ø§ Ø£Ø¯Ù†Ø§Ù‡.';
        customDurationContainer.style.display = 'block';
        customDurationInput.required = true;
        calculationDetails.style.display = 'none';
        return;
      }
      customDurationContainer.style.display = 'none';
      customDurationInput.required = false;

      const weeks = durationToWeeks[duration];
      if (!weeks) {
        durationPriceDisplay.textContent = '';
        calculationDetails.style.display = 'none';
        return;
      }
      durationPriceDisplay.textContent = `Ù…Ø¯Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ: ${weeks.toFixed(2)} Ø£Ø³Ø¨ÙˆØ¹/Ø£Ø³Ø§Ø¨ÙŠØ¹`;
      updateTotalPrice();
    }

    function updateTotalPrice() {
      const plan = planSelect.value;
      const duration = durationSelect.value;

      if (!plan || !planPrices[plan]) {
        durationPriceDisplay.textContent = '';
        calculationDetails.style.display = 'none';
        return;
      }
      if (!duration || duration === 'custom') {
        durationPriceDisplay.textContent = '';
        calculationDetails.style.display = 'none';
        return;
      }

      const weeks = durationToWeeks[duration];
      if (!weeks) {
        durationPriceDisplay.textContent = '';
        calculationDetails.style.display = 'none';
        return;
      }

      const monthlyPrice = planPrices[plan];
      const weeksInMonth = 52.1775 / 12;

      let totalPrice = 0;
      let calcText = '';

      if (duration.endsWith('_week')) {
        const weeklyPrice = monthlyPrice / weeksInMonth;
        totalPrice = Math.round(weeklyPrice * weeks);
        calcText = `Ø§Ù„Ø­Ø³Ø¨Ø©:\n- Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ: ${monthlyPrice} Ø±ÙŠØ§Ù„\n- Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹: ${weeks.toFixed(2)} Ø£Ø³Ø¨ÙˆØ¹\n- Ø§Ù„Ø­Ø³Ø§Ø¨: (${monthlyPrice} Ã· ${weeksInMonth.toFixed(3)}) Ã— ${weeks.toFixed(2)} = ${totalPrice} Ø±ÙŠØ§Ù„ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹`;
      } else if (duration.endsWith('_month')) {
        const months = weeks / weeksInMonth;
        totalPrice = Math.round(monthlyPrice * months);
        calcText = `Ø§Ù„Ø­Ø³Ø¨Ø©:\n- Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ: ${monthlyPrice} Ø±ÙŠØ§Ù„\n- Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ù‡Ø±: ${months.toFixed(2)} Ø´Ù‡Ø±\n- Ø§Ù„Ø­Ø³Ø§Ø¨: ${monthlyPrice} Ã— ${months.toFixed(2)} = ${totalPrice} Ø±ÙŠØ§Ù„ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹`;
      } else if (duration.endsWith('_year')) {
        const years = weeks / 52.1775;
        totalPrice = Math.round(monthlyPrice * 12 * years);
        calcText = `Ø§Ù„Ø­Ø³Ø¨Ø©:\n- Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ: ${monthlyPrice} Ø±ÙŠØ§Ù„\n- Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù†ÙˆØ§Øª: ${years.toFixed(2)} Ø³Ù†Ø©\n- Ø§Ù„Ø­Ø³Ø§Ø¨: ${monthlyPrice} Ã— 12 Ã— ${years.toFixed(2)} = ${totalPrice} Ø±ÙŠØ§Ù„ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹`;
      } else {
        totalPrice = Math.round(monthlyPrice * (weeks / weeksInMonth));
        calcText = `Ø§Ù„Ø­Ø³Ø¨Ø©:\n- Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ: ${monthlyPrice} Ø±ÙŠØ§Ù„\n- Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹: ${weeks.toFixed(2)} Ø£Ø³Ø¨ÙˆØ¹\n- Ø§Ù„Ø­Ø³Ø§Ø¨: ${monthlyPrice} Ã— (${weeks.toFixed(2)} Ã· ${weeksInMonth.toFixed(3)}) = ${totalPrice} Ø±ÙŠØ§Ù„ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹`;
      }

      durationPriceDisplay.textContent = `ğŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ: ${totalPrice} Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (${weeks.toFixed(2)} Ø£Ø³Ø¨ÙˆØ¹/Ø£Ø³Ø§Ø¨ÙŠØ¹)`;
      calculationDetails.textContent = calcText;
      calculationDetails.style.display = 'none';
    }

    planSelect.addEventListener('change', () => updatePlanPrice());
    durationSelect.addEventListener('change', () => updateDurationPrice());

    bankTransferBtn.addEventListener('click', () => {
      bankTransferSelected = !bankTransferSelected;
      bankTransferInfo.style.display = bankTransferSelected ? 'block' : 'none';
    });

    toggleCalcBtn.addEventListener('click', () => {
      if (calculationDetails.style.display === 'none') {
        calculationDetails.style.display = 'block';
        toggleCalcBtn.textContent = 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ø³Ø¨Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© â–²';
      } else {
        calculationDetails.style.display = 'none';
        toggleCalcBtn.textContent = 'Ø§Ù„Ø­Ø³Ø¨Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© â–¼';
      }
    });

    function validateBankInfo() {
      if (bankTransferSelected) {
        const receipt = document.getElementById('transferReceipt');
        if (!receipt.files.length) {
          alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø±ÙØ§Ù‚ Ø¥ÙŠØµØ§Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ.');
          receipt.focus();
          return false;
        }
      }
      return true;
    }

    updatePlanPrice();
    updateDurationPrice();
  </script>
</body>
</html>
